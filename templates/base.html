<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>O.K Team Server API Docs</title>
    <style>
        :root{
            --bg:#0e0f13;--surface:#12141a;--muted:#9aa4b2;--ring:#23283b;--primary:#4c5fff;
        }
        body { font-family: 'Segoe UI', Arial, sans-serif; background: radial-gradient(1200px 600px at 80% -10%, #1f2336, transparent 70%), var(--bg); margin: 0; color:#e6e8ee; }
        .container { max-width: 900px; margin: 40px auto; background: var(--surface); border-radius: 12px; box-shadow: 0 2px 16px #0006; padding: 32px; border:1px solid var(--ring); }
        h1 { color: #e6f8ff; }
        .api-section { margin-bottom: 32px; }
        .api-title { font-size: 1.2em; margin-bottom: 8px; color: #cfe0ff; }
        .endpoint-list { background: #0f1220; border:1px solid var(--ring); border-radius: 8px; padding: 12px 20px; margin-bottom: 12px; }
        .endpoint { margin-bottom: 6px; }
        .endpoint span { font-family: monospace; color: #e6e8ee; }
        .desc { color: var(--muted); font-size: 0.98em; margin-bottom: 8px; }
        .footer { text-align: center; color: #7b849b; margin-top: 40px; font-size: 0.95em; }
        a { color: var(--primary); text-decoration: none; }
        a:hover { text-decoration: underline; }
    .qr { display:block; padding:16px; background:#0f1220; border:1px solid var(--ring); border-radius:10px; margin:16px 0 24px; overflow: visible; }
    .qr .svg { width: clamp(240px, 60vw, 480px); margin: 0 auto; }
    .qr svg { display:block; width: 100%; height: auto; max-width: 100%; image-rendering: pixelated; }
    </style>
</head>
<body>
<div class="container">
    <h1>Welcome to O.K Team Server :)</h1>
    <p>This is the backend for <b>O.K Team Server</b>. Below are the available API endpoints and their main routes.<br>
    For more details, see the documentation or contact the project maintainers.</p>

    <p style="margin: 12px 0 24px;">
        <a href="/team/">Meet the Team page â†’</a>
    </p>

    {% if qr_svg %}
    <div class="qr">
        <div class="svg" aria-label="QR code">{{ qr_svg|safe }}</div>
    </div>
    {% endif %}

    <div class="api-section">
        <div class="api-title"><a href="/admin/">Admin Panel</a></div>
        <div class="desc">Django admin interface for managing users, content, and settings.</div>
        <div class="endpoint-list">
            <div class="endpoint"><span>/admin/</span> &mdash; Admin dashboard</div>
        </div>
    </div>

    <div class="api-section">
        <div class="api-title"><a href="/api/v1/auth_api/">Authentication API</a></div>
        <div class="desc">Endpoints for registration, login, OAuth, OTP, visitor sessions, and email verification.</div>
        <div class="endpoint-list">
            <div class="endpoint"><span>POST /api/v1/auth_api/login/</span> &mdash; Email/password login</div>
            <div class="endpoint"><span>POST /api/v1/auth_api/reg/</span> &mdash; Register new user</div>
            <div class="endpoint"><span>POST /api/v1/auth_api/verify-email-pin/</span> &mdash; Verify email PIN</div>
            <div class="endpoint"><span>POST /api/v1/auth_api/set-password-after-email-verify/</span> &mdash; Set password after email verification</div>
            <div class="endpoint"><span>POST /api/v1/auth_api/logout/</span> &mdash; Logout</div>
            <div class="endpoint"><span>POST /api/v1/auth_api/otp-login/</span> &mdash; Request OTP login</div>
            <div class="endpoint"><span>POST /api/v1/auth_api/send-login-otp/</span> &mdash; Send OTP to email</div>
            <div class="endpoint"><span>POST /api/v1/auth_api/verify-login-otp/</span> &mdash; Verify OTP and login</div>
            <div class="endpoint"><span>GET /api/v1/auth_api/health/</span> &mdash; Health check</div>
            <div class="endpoint"><span>POST /api/v1/auth_api/token/refresh/</span> &mdash; Refresh JWT token</div>
        </div>
        <div class="desc"><b>OAuth Providers:</b></div>
        <div class="endpoint-list">
            <div class="endpoint"><span>GET /api/v1/auth_api/google/authorize/</span> &mdash; Start Google OAuth</div>
            <div class="endpoint"><span>GET /api/v1/auth_api/google/callback/</span> &mdash; Google OAuth callback</div>
            <div class="endpoint"><span>GET /api/v1/auth_api/openrouter/authorize/</span> &mdash; Start OpenRouter OAuth</div>
            <div class="endpoint"><span>GET /api/v1/auth_api/openrouter/callback/</span> &mdash; OpenRouter OAuth callback</div>
            <div class="endpoint"><span>GET /api/v1/auth_api/github/authorize/</span> &mdash; Start GitHub OAuth</div>
            <div class="endpoint"><span>GET /api/v1/auth_api/github/callback/</span> &mdash; GitHub OAuth callback</div>
            <div class="endpoint"><span>GET /api/v1/auth_api/microsoft/authorize/</span> &mdash; Start Microsoft OAuth</div>
            <div class="endpoint"><span>GET /api/v1/auth_api/microsoft/callback/</span> &mdash; Microsoft OAuth callback</div>
            <div class="endpoint"><span>GET /api/v1/auth_api/oauth/result/&lt;state&gt;/</span> &mdash; SPA/mobile OAuth result fetch</div>
        </div>
    </div>

    <div class="api-section">
        <div class="api-title"><a href="/api/v1/user_mang/">User Management API</a></div>
        <div class="desc">User profile, preferences, and related user operations.</div>
        <div class="endpoint-list">
            <div class="endpoint"><span>GET /api/v1/user_mang/user/</span> &mdash; Get current user details</div>
            <div class="endpoint"><span>PUT /api/v1/user_mang/user/</span> &mdash; Update user details</div>
            <div class="endpoint"><span>DELETE /api/v1/user_mang/user/</span> &mdash; Archive/delete user</div>
            <div class="endpoint"><span>GET /api/v1/user_mang/admin/user/&lt;user_id&gt;/</span> &mdash; Admin: get user by ID</div>
            <div class="endpoint"><span>PUT /api/v1/user_mang/admin/user/&lt;user_id&gt;/</span> &mdash; Admin: update user by ID</div>
            <div class="endpoint"><span>DELETE /api/v1/user_mang/admin/user/&lt;user_id&gt;/</span> &mdash; Admin: archive user by ID</div>
        </div>
    </div>

    <div class="api-section">
        <div class="api-title"><a href="/api/v1/chat_api/">Chat API</a></div>
        <div class="desc">Chat and messaging endpoints for system users.</div>
        <div class="endpoint-list">
            <div class="endpoint"><span>GET /api/v1/chat_api/sync-conversations/&lt;anon_id&gt;/</span> &mdash; Sync conversations for visitor</div>
            <div class="endpoint"><span>GET /api/v1/chat_api/sync-conversations/&lt;user_id&gt;/</span> &mdash; Sync conversations for user</div>
            <div class="endpoint"><span>POST /api/v1/chat_api/sync-conversations/&lt;anon_id&gt;/</span> &mdash; Upload conversations for visitor</div>
            <div class="endpoint"><span>POST /api/v1/chat_api/sync-conversations/&lt;user_id&gt;/</span> &mdash; Upload conversations for user</div>
            <div class="endpoint"><span>POST /api/v1/chat_api/associate-device/</span> &mdash; Associate device with user/visitor</div>
            <div class="endpoint"><span>GET /api/v1/chat_api/attachments/</span> &mdash; List attachments</div>
            <div class="endpoint"><span>POST /api/v1/chat_api/attachments/</span> &mdash; Upload attachment</div>
        </div>
    </div>

    <div class="api-section">
        <div class="api-title"><a href="/api/v1/crypto_api/">Crypto API</a></div>
        <div class="desc">User key material management.</div>
        <div class="endpoint-list">
            <div class="endpoint"><span>GET /api/v1/crypto_api/umk/</span> &mdash; Get user key material</div>
            <div class="endpoint"><span>POST /api/v1/crypto_api/umk/</span> &mdash; Provision user key material</div>
        </div>
    </div>

    <div class="footer">
        &copy; 2025 OK Team Project. All rights reserved.
    </div>
</div>
</body>
</html>